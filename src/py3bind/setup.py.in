#! /usr/bin/python3

from distutils.core import setup, Extension;
import sys

# Steal the argument containing the nxkernel name
nxkernel = sys.argv[2]
sys.argv = sys.argv[:2]

py3bind = Extension('nxdragon',
					library_dirs = [ '${CMAKE_BINARY_DIR}/bin', '${CMAKE_BINARY_DIR}/bin/Debug', '${CMAKE_BINARY_DIR}/bin/Release' ],
					libraries = [ nxkernel ],
					define_macros = [ ('NXDRAGON_BUILD_PY3BIND', None) ],
					sources = [	'${CMAKE_CURRENT_SOURCE_DIR}/nx_pyengine.c', 
								'${CMAKE_CURRENT_SOURCE_DIR}/nx_pymodule.c', 
								'${CMAKE_CURRENT_SOURCE_DIR}/nx_pykernel_atomic.c', 
								'${CMAKE_CURRENT_SOURCE_DIR}/nx_pykernel_list.c' ])

setup(name = 'nxdragon',
	  author = "Patrik Jeppsson",
	  version = '0.1',
	  description = 'NxDragon Game Engine Python API', 
	  ext_modules = [py3bind])
